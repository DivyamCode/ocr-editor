(this["webpackJsonpsandhi-web"]=this["webpackJsonpsandhi-web"]||[]).push([[0],{104:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(31),o=n.n(i),l=(n(80),n(13)),s=(n(81),n(82),n(130));!function(e){e.LoadImage="LoadImage",e.LoadHocr="LoadHocr",e.SetHoverId="SetHoverId",e.LogInfo="LogInfo",e.ChangeCurPage="ChangeCurPage"}(a||(a={}));var d=n(37);var b=Object(s.a)((function(e,t){switch(t.type){case a.ChangeCurPage:return Object(d.a)(e,(function(e){e.curPageno=t.payload.curPageno}));case a.LogInfo:return Object(d.a)(e,(function(e){e.logInfo=t.payload.logInfo}));case a.LoadImage:return Object(d.a)(e,(function(e){e.pageImage=t.payload.pageImage}));case a.LoadHocr:return Object(d.a)(e,(function(e){e.hocrPage=t.payload.hocrPage}));case a.SetHoverId:return Object(d.a)(e,(function(e){e.hoverId=t.payload.hoverId}))}}),{pageImage:null,model:"",hocrPage:null,logInfo:"",curPageno:1}),u=Object(l.a)(b,3),h=u[0],j=u[1],v=(u[2],n(26)),p=n(14),g=n(28),x=n.n(g),m=n(34),O=n(45),f=n.n(O);function w(e){return y.apply(this,arguments)}function y(){return(y=Object(m.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,createImageBitmap(t);case 2:return n=e.sent,e.abrupt("return",{curWidth:n.width,curHeight:n.height,urlObject:URL.createObjectURL(t),orgWidth:n.width,orgHeight:n.height});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=n(39),I=Object(N.a)(a.ChangeCurPage,(function(e){return{payload:{curPageno:e}}})),k=(Object(N.a)(a.LogInfo,(function(e){return{payload:{logInfo:e}}})),Object(N.a)(a.SetHoverId,(function(e){return{payload:{hoverId:e}}}))),C=Object(N.a)(a.LoadImage,(function(e){return{payload:{pageImage:e}}})),H=Object(N.a)(a.LoadHocr,(function(e){return{payload:{hocrPage:e}}})),S=n(59),L=n.n(S);function P(e,t){Array.isArray(t)?L()(t.some((function(t){return t===e})),"Expected element to have class name of one of: %s, received %s.",JSON.stringify(t),e):L()(t===e,"Expected element to have class name of %s, received %s.",t,e)}function z(e){var t=e.match(/bbox ([0-9]+) ([0-9]+) ([0-9]+) ([0-9]+)/);if(!t)throw new Error("No bbox attribute found in title.");return{x0:+t[1],y0:+t[2],x1:+t[3],y1:+t[4]}}function A(e,t){var n=e.match(new RegExp("".concat(t," (-?[0-9]+(?:\\.[0-9]+)?)")));return n?parseFloat(n[1]):null}var _=function(e){return A(e,"x_fsize")},M=function(e){return A(e,"x_wconf")},E=function(e){return A(e,"x_size")};function F(e){var t,n,a,c;P(e.className,"ocrx_word");var r=null!==(t=e.getAttribute("title"))&&void 0!==t?t:"";return{type:"word",id:null!==(n=e.getAttribute("id"))&&void 0!==n?n:"",bbox:z(r),size:_(r),confidence:M(r),language:null!==(a=e.getAttribute("lang"))&&void 0!==a?a:"",text:null!==(c=e.textContent)&&void 0!==c?c:""}}function W(e){var t,n;P(e.className,["ocr_line","ocr_caption","ocr_textfloat"]);var a=null!==(t=e.getAttribute("title"))&&void 0!==t?t:"",c="line";return"ocr_caption"===e.className&&(c="caption"),"ocr_textfloat"===e.className&&(c="textfloat"),{type:c,id:null!==(n=e.getAttribute("id"))&&void 0!==n?n:"",bbox:z(a),size:E(a),children:Array.from(e.children).map(F)}}function B(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return console.log(e),function(e){var t,n,a=e.querySelector(".ocr_page");if(!a)throw new Error('Could not find an element with class "ocr_page".');var c=null!==(t=a.getAttribute("title"))&&void 0!==t?t:"",r=e.querySelectorAll(".ocr_line");if(!r)throw new Error('Could not find an element with class "ocr_line".');return{type:"page",id:null!==(n=a.getAttribute("id"))&&void 0!==n?n:"",title:e.title,bbox:z(c),children:Array.from(r).map(W)}}((new DOMParser).parseFromString(e,"text/html"))}),(function(e){console.log(e)}))}var R=n(1);var T=function(e){var t=e.curPageno,n=e.dispatch,a=e.fnSetCurZoom,r=f.a.parse(window.location.search),i="http://10.129.6.78:5000/i/b/"+(null===r||void 0===r?void 0:r.b)+"/p/"+t,o="http://10.129.6.78:5000/h/b/"+(null===r||void 0===r?void 0:r.b)+"/p/"+t,l=function(e){console.log("handling page change +"+i),fetch(i).then((function(e){return e.blob()})).then(function(){var e=Object(m.a)(x.a.mark((function e(t){var a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type.includes("image")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w(t);case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return");case 7:return a.curWidth=0,a.curHeight=0,n(C(a)),e.next=12,B(o);case 12:c=e.sent,n(H(c));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return Object(c.useEffect)((function(){l()}),[t]),Object(R.jsx)("div",{className:"container-fluid pv-toolbar border",children:Object(R.jsxs)("div",{className:"row align-items-left shadow",children:[Object(R.jsxs)("div",{className:"col pl-3",children:[Object(R.jsx)("span",{className:"pe-md-5",children:Object(R.jsx)("button",{type:"button",className:"btn btn-light toolbar-btn",title:"Toggle Side-pane Window",children:Object(R.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-layout-sidebar",viewBox:"0 0 16 16",children:Object(R.jsx)("path",{d:"M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm5-1v12h9a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H5zM4 2H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2V2z"})})})}),Object(R.jsxs)("button",{type:"button",className:"btn btn-light toolbar-btn px-2",title:"Previous Page",onClick:function(e){t-1>0&&n(I(parseInt(t-1)))},children:[Object(R.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-arrow-left-circle-fill",viewBox:"0 0 16 16",children:Object(R.jsx)("path",{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"})}),"   "]}),Object(R.jsx)("span",{className:"border-start border-2 h-100 rounded-pill"}),Object(R.jsxs)("button",{type:"button",className:"btn btn-light toolbar-btn px-2",title:"Next Page",onClick:function(e){t+1>0&&n(I(parseInt(t+1)))},children:[Object(R.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-arrow-right-circle-fill",viewBox:"0 0 16 16",children:Object(R.jsx)("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"})}),"    "]}),Object(R.jsxs)("span",{className:"page-num",children:[Object(R.jsx)("input",{type:"text",value:t,className:"well-shadow",onChange:l}),Object(R.jsx)("span",{className:"border-0",children:"of 217"})]})]}),Object(R.jsxs)("div",{className:"col",children:[Object(R.jsx)("button",{type:"button",className:"btn btn-light toolbar-btn px-2",title:"Zoom-in",onClick:function(){return a(.25)},children:Object(R.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-zoom-in",viewBox:"0 0 16 16",children:[Object(R.jsx)("path",{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"}),Object(R.jsx)("path",{d:"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"}),Object(R.jsx)("path",{fillRule:"evenodd",d:"M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"})]})}),Object(R.jsx)("span",{className:"border-start border-2 h-100 rounded-pill"}),Object(R.jsx)("button",{type:"button",className:"btn btn-light toolbar-btn px-2",title:"Zoom-out",onClick:function(){return a(-.25)},children:Object(R.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-zoom-out",viewBox:"0 0 16 16",children:[Object(R.jsx)("path",{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"}),Object(R.jsx)("path",{d:"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"}),Object(R.jsx)("path",{fillRule:"evenodd",d:"M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"})]})})]})]})})},V=n(22),G=n(131),D=n(4),U=n(5),Z=n(8),J=n(7),q=function(e){Object(Z.a)(n,e);var t=Object(J.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).image=null,e}return Object(U.a)(n,[{key:"componentDidUpdate",value:function(e){var t,n;(null===(t=e.pageImage)||void 0===t?void 0:t.urlObject)!==(null===(n=this.props.pageImage)||void 0===n?void 0:n.urlObject)&&this.loadImage()}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.image)||void 0===e||e.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){var e;this.image=new window.Image,this.image.src=null===(e=this.props.pageImage)||void 0===e?void 0:e.urlObject}},{key:"render",value:function(){var e=this;return Object(R.jsx)(V.a,{image:this.image,ref:function(t){e.imageNode=t},width:this.props.width,height:this.props.height})}}]),n}(r.a.Component),$=n(62);function K(e){var t=e.page,n=e.pageImage,a=e.width,i=e.height,o=e.dispatch,l=e.hoverId,s=Object(c.useRef)([]),d=function(e){o(k(e))},b=function(e,t,n,a,c){if(e)return Object($.a)(Array.from(e),{by:"area",order:"desc",computed:{area:function(e){return e.bbox?(e.bbox.x1-e.bbox.x0)*(e.bbox.y1-e.bbox.y0):0}}}).map((function(e){var r,i;return Object(R.jsx)(V.c,{id:e.id,ref:function(t){s.current[e.id]=t},className:"ocr_lines",x:parseInt((null===(r=e.bbox)||void 0===r?void 0:r.x0)*n/(null===t||void 0===t?void 0:t.orgWidth)),y:parseInt((null===(i=e.bbox)||void 0===i?void 0:i.y0)*a/(null===t||void 0===t?void 0:t.orgHeight)),width:(e.bbox.x1-e.bbox.x0)*n/(null===t||void 0===t?void 0:t.orgWidth),height:(e.bbox.y1-e.bbox.y0)*a/(null===t||void 0===t?void 0:t.orgHeight),stroke:"red",strokeEnabled:c===e.id,onMouseEnter:function(e){d(e.target.attrs.id)},onMouseLeave:function(e){d("")}},e.id)}))};if(null===t||null===n)return Object(R.jsx)(V.b,{});var u=Object($.a)(Array.from(t.children),{by:"area",order:"desc",computed:{area:function(e){return e.bbox?(e.bbox.x1-e.bbox.x0)*(e.bbox.y1-e.bbox.y0):0}}}).map((function(e){var t;return Object(R.jsxs)(r.a.Fragment,{children:[Object(R.jsx)(V.c,{id:e.id,ref:function(t){s.current[e.id]=t},className:"ocr_lines",x:parseInt((null===(t=e.bbox)||void 0===t?void 0:t.x0)*a/(null===n||void 0===n?void 0:n.orgWidth)),y:parseInt(e.bbox.y0*i/(null===n||void 0===n?void 0:n.orgHeight)),width:(e.bbox.x1-e.bbox.x0)*a/(null===n||void 0===n?void 0:n.orgWidth),height:(e.bbox.y1-e.bbox.y0)*i/(null===n||void 0===n?void 0:n.orgHeight)},e.id),b(e.children,n,a,i,l)]})}));return Object(R.jsx)(V.b,{children:u})}n(104);var Q=function(e){var t=e.page,n=e.hoverId,a=e.dispatch;if(null==t)return Object(R.jsx)("div",{});var c=function(e,t){if(e){var n=function(e){a(k(e))};return e.map((function(e){return Object(R.jsxs)("span",{className:"ocr_word ".concat(t===e.id?"hoved":""),onMouseEnter:function(){n(e.id)},onMouseLeave:function(){n("")},children:[e.text," "]},e.id)}))}},r=t.children.map((function(e){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("span",{className:"ocr_line",children:c(e.children,n)},e.id),Object(R.jsx)("br",{})]})}));return Object(R.jsx)("div",{children:Object(R.jsx)("p",{children:r})})},X=n(32),Y=n.n(X);var ee=function(){var e,t,n,a,r,i,o,s,d,b,u,j,p,g=h(),x=Object(l.a)(g,2),m=x[0],O=x[1],w=f.a.parse(window.location.search),y=Object(c.useState)(1),N=Object(l.a)(y,2),k=N[0],C=N[1],H=Object(c.useState)(null),S=Object(l.a)(H,2),L=S[0],P=S[1],z=Object(G.a)(),A=Object(l.a)(z,2),_=A[0],M=A[1],E=M.width,F=M.height;return Object(c.useEffect)((function(){(null===w||void 0===w?void 0:w.p)||(w.p="1"),(null===w||void 0===w?void 0:w.b)&&Y.a.get("http://10.129.6.78:5000/books/"+w.b).then((function(e){return P(e.data)})),O(I(parseInt(w.p)))}),[]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("nav",{className:"navbar navbar-expand-md shadow-sm rounded p-0 m-0",children:Object(R.jsxs)("div",{className:"container-fluid py-0",children:[Object(R.jsxs)(v.b,{className:"navbar-brand",to:"/cli",children:[Object(R.jsx)("span",{className:"px-2",children:Object(R.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"42",height:"42",fill:"currentColor",class:"bi bi-arrow-left-circle",viewBox:"0 0 16 16",children:Object(R.jsx)("path",{fillRule:"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"})})}),"Sandhi",Object(R.jsx)("span",{className:"navbar-subbrand px-2",children:"Page Viewer"})]}),Object(R.jsx)("span",{className:"navbar-text px-3 me-auto",children:null===L||void 0===L?void 0:L.title})]})}),Object(R.jsx)(T,{curPageno:m.curPageno,dispatch:O,fnSetCurZoom:function(e){C(k+e)}}),Object(R.jsxs)("div",{className:"container-fluid pv-container pt-2 pb-4 px-2",children:[Object(R.jsxs)("div",{className:"row wh-90 vh-100 border shadow",children:[Object(R.jsx)("div",{className:"col-md-6 shadow",ref:_,children:Object(R.jsx)("div",{className:"p-3 border pv-pane",children:Object(R.jsxs)(V.d,{width:(0!==(null===(e=m.pageImage)||void 0===e?void 0:e.curWidth)?null===(t=m.pageImage)||void 0===t?void 0:t.curWidth:E)*k,height:(0!==(null===(n=m.pageImage)||void 0===n?void 0:n.curHeight)?null===(a=m.pageImage)||void 0===a?void 0:a.curHeight:F)*k,children:[!m.pageImage&&Object(R.jsx)(V.b,{children:Object(R.jsx)(V.e,{text:null===(r=m.pageImage)||void 0===r?void 0:r.urlObject})}),Object(R.jsx)(V.b,{children:Object(R.jsx)(q,{pageImage:m.pageImage,width:(0!==(null===(i=m.pageImage)||void 0===i?void 0:i.curWidth)?null===(o=m.pageImage)||void 0===o?void 0:o.curWidth:E)*k,height:(0!==(null===(s=m.pageImage)||void 0===s?void 0:s.curHeight)?null===(d=m.pageImage)||void 0===d?void 0:d.curHeight:F)*k})}),Object(R.jsx)(K,{page:m.hocrPage,dispatch:O,pageImage:m.pageImage,width:(0!==(null===(b=m.pageImage)||void 0===b?void 0:b.curWidth)?null===(u=m.pageImage)||void 0===u?void 0:u.curWidth:E)*k,height:(0!==(null===(j=m.pageImage)||void 0===j?void 0:j.curHeight)?null===(p=m.pageImage)||void 0===p?void 0:p.curHeight:F)*k,hoverId:m.hoverId})]})})}),Object(R.jsx)("div",{className:"col-md-6 shadow",children:Object(R.jsx)("div",{className:"p-3 border pv-pane",children:Object(R.jsx)(Q,{page:m.hocrPage,hoverId:m.hoverId,dispatch:O})})})]}),Object(R.jsx)("div",{className:"row fixed-bottom",children:Object(R.jsx)("div",{className:"col-md-6 offset-md-4 px-3",children:m.logInfo})})]})]})},te=n(11),ne=n(52),ae=n(38),ce=n(17),re=n(49);var ie=function(){var e,t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(!1),o=Object(l.a)(i,2),s=o[0],d=o[1],b=Object(c.useState)({}),u=Object(l.a)(b,2),h=u[0],j=u[1],p=Object(c.useState)([]),g=Object(l.a)(p,2),x=g[0],m=g[1],O=Object(c.useState)({}),f=Object(l.a)(O,2),w=f[0],y=f[1],N=Object(c.useRef)(null),I=function(){return r(!1)},k=function(){Y.a.get("http://10.129.6.78:5000/books").then((function(e){m(e.data)})).catch((function(e){y({msg:e.response.data,variant:"danger"}),d(!0)}))};Object(c.useEffect)((function(){k()}),[]);var C=x.map((function(e,t){return Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{children:t+1}),Object(R.jsx)("td",{children:e.title}),Object(R.jsx)("td",{children:e.author}),Object(R.jsx)("td",{children:e.category}),Object(R.jsx)("td",{children:Object(R.jsx)(v.b,{to:"/cli/pageview?b="+e._id.$uuid,children:"View Book"})})]},e._id.$uuid)})),H=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.id,c=Object.assign({},h);c[a]=n,j(c)};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(ae.a,{show:a,onHide:I,animation:!1,children:[Object(R.jsx)(ae.a.Header,{children:Object(R.jsx)(ae.a.Title,{children:"Add a book to SandHI catalog using this form"})}),Object(R.jsx)(ae.a.Body,{children:Object(R.jsxs)(ce.a,{ref:N,onSubmit:function(e){e.preventDefault();var t=new FormData(N.current);Y.a.post("http://10.129.6.78:5000/books",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){y({msg:"Successfully saved the book to the SandHI catalog",variant:"success"}),d(!0),k()})).catch((function(e){var t;y({msg:null===(t=e.response)||void 0===t?void 0:t.data,variant:"danger"}),d(!0)}))},children:[Object(R.jsxs)(ce.a.Group,{children:[Object(R.jsx)(ce.a.Label,{children:"Book Title"}),Object(R.jsx)(ce.a.Control,{type:"text",placeholder:"Enter Book Title",onChange:H,id:"title",name:"title"})]}),Object(R.jsxs)(ce.a.Group,{children:[Object(R.jsx)(ce.a.Label,{children:"Author of the book"}),Object(R.jsx)(ce.a.Control,{type:"text",placeholder:"Enter name of the Author",onChange:H,id:"author",name:"author"})]}),Object(R.jsxs)(ce.a.Group,{children:[Object(R.jsx)(ce.a.Label,{children:"Category"}),Object(R.jsxs)(ce.a.Control,{as:"select",id:"category",name:"category",children:[Object(R.jsx)("option",{value:"general",children:"General"}),Object(R.jsx)("option",{value:"ganitha",children:"Ganitha"})]})]}),Object(R.jsxs)(ce.a.Group,{children:[Object(R.jsx)(ce.a.Label,{children:"Number of pages"}),Object(R.jsx)(ce.a.Control,{type:"text",placeholder:"Number of pages",id:"noofpages",name:"noofpages"})]}),Object(R.jsxs)(ce.a.Group,{children:[Object(R.jsx)(ce.a.Label,{children:"Pdf File of the book"}),Object(R.jsx)(ce.a.File,{id:"uploaded_file",name:"uploaded_file"})]}),Object(R.jsx)("br",{}),Object(R.jsx)(ne.a,{variant:"primary",type:"submit",children:"Submit"}),Object(R.jsx)(re.a,(e={variant:"danger",onClose:function(){return d(!1)},dismissible:!0,show:s},Object(te.a)(e,"variant",null===w||void 0===w?void 0:w.variant),Object(te.a)(e,"children",null===w||void 0===w?void 0:w.msg),e))]})}),Object(R.jsx)(ae.a.Footer,{children:Object(R.jsx)(ne.a,{variant:"secondary",onClick:I,children:"Close"})})]}),Object(R.jsx)("div",{className:"container",children:Object(R.jsx)("div",{className:"row",children:Object(R.jsx)("div",{className:"col",children:Object(R.jsxs)("table",{className:"table table-striped",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{scope:"col",children:"#"}),Object(R.jsx)("th",{scope:"col",children:"Title"}),Object(R.jsx)("th",{scope:"col",children:"Author"}),Object(R.jsx)("th",{scope:"col",children:"Category"}),Object(R.jsx)("th",{scope:"col",children:"Link to the book"})]})}),Object(R.jsxs)("tbody",{children:[Object(R.jsx)("tr",{children:Object(R.jsx)("td",{colSpan:5,children:Object(R.jsxs)(v.b,{to:"/cli/search",children:[" ","Search the Catalog"]})})}),C,Object(R.jsx)("tr",{children:Object(R.jsx)("td",{colSpan:5,children:Object(R.jsx)(ne.a,{variant:"link",onClick:function(){return r(!0)},children:"Add a book to the Catalog"})})})]})]})})})})]})};n(127);function oe(){var e,t,n,a,r=Object(c.useState)(""),i=Object(l.a)(r,2),o=(i[0],i[1]),s=Object(c.useState)({}),d=Object(l.a)(s,2),b=d[0],u=d[1],h=Object(c.useState)(!1),j=Object(l.a)(h,2),p=j[0],g=j[1],O=Object(c.useState)({}),f=Object(l.a)(O,2),w=f[0],y=f[1],N=null===w||void 0===w||null===(e=w.response)||void 0===e?void 0:e.docs.map((function(e,t){var n;return Object(R.jsxs)("div",{className:"card col-12 col-md-9 border-0 pt-4",children:[Object(R.jsx)(v.b,{to:"/cli/pageview?b="+e.bookuuid+"&p="+e.pageno,className:"card-link stretched-link",target:"_blank",rel:"noopener noreferrer",children:"http://10.129.6.78:5000/cli/pageview?b="+e.bookuuid+"&p="+e.pageno}),Object(R.jsxs)("div",{className:"card-title pt-2 inline-headers",children:[Object(R.jsx)("h5",{children:null===e||void 0===e?void 0:e.title}),Object(R.jsx)("span",{className:"badge bg-light text-dark rounded-pill",children:"Page "+e.pageno}),Object(R.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:e.author})]}),Object(R.jsx)("div",{className:"card-body p-0 m-0 text-muted d-inline-block text-truncate",dangerouslySetInnerHTML:{__html:null===(n=w.highlighting[e.id])||void 0===n?void 0:n.pagecontent[0]}})]},e.id)})),I=function(){var e=Object(m.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://10.129.6.78:5000/s/"+t,e.next=3,Y.a.get(n).then((function(e){y(e.data)})).catch((function(e){var t;e.response?u({msg:null===(t=e.response)||void 0===t?void 0:t.data,variant:"danger"}):u({msg:"Unkown errro in server",variant:"danger"});g(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{className:"container-fluid px-5 pt-5",children:Object(R.jsxs)("div",{className:"row align-items-center shadow p-2",children:[Object(R.jsx)(v.b,{to:"/cli",children:"back to Catalog"}),Object(R.jsx)("div",{className:"col-12 col-md-4 col-lg-2",children:Object(R.jsx)("p",{className:"h1",children:"Sandhi"})}),Object(R.jsx)("div",{className:"col-12 col-md-8 col-lg-8",children:Object(R.jsx)("input",{type:"text",className:"form-control form-control-lg",id:"exampleFormControlInput1",placeholder:"enter your search string",onKeyDown:function(e){if("Enter"===e.key)return I(e.target.value),void console.log(N);o(e.target.value)}})}),Object(R.jsx)(re.a,(t={variant:"danger",onClose:function(){return g(!1)},dismissible:!0,show:p},Object(te.a)(t,"variant",null===b||void 0===b?void 0:b.variant),Object(te.a)(t,"children",null===b||void 0===b?void 0:b.msg),t))]})}),Object(R.jsx)("div",{className:"container-fluid p-0 m-0",children:Object(R.jsx)("hr",{})}),Object(R.jsxs)("div",{className:"container",children:[Object(R.jsx)("div",{className:"row",children:Object(R.jsx)("div",{className:"col-12 col-md-4",show:null===w||void 0===w?void 0:w.response,children:Object(R.jsxs)("h6",{className:"text-muted",children:[null===w||void 0===w||null===(n=w.response)||void 0===n?void 0:n.numFound," ","results in ",(null===w||void 0===w||null===(a=w.responseHeader)||void 0===a?void 0:a.QTime)+" ","milliseconds"]})})}),Object(R.jsx)("div",{className:"row border shadow-lg pb-4",children:N})]})]})}var le=function(){var e=h(),t=Object(l.a)(e,2),n=(t[0],t[1],window.location.href);return n.split("?").length>1&&n.split("?")[1].split("&")[0],Object(R.jsx)(v.a,{children:Object(R.jsxs)(p.c,{children:[Object(R.jsx)(p.a,{path:"/cli/search",children:Object(R.jsx)(oe,{})}),Object(R.jsxs)(p.a,{exact:!0,path:"/cli",children:[Object(R.jsx)("nav",{className:"navbar navbar-dark bg-primary navbar-expand-md shadow-sm rounded p-0 m-0",children:Object(R.jsxs)("div",{className:"container-fluid py-0",children:[Object(R.jsx)(v.b,{className:"navbar-brand",to:"/cli",children:"SandHI"}),Object(R.jsx)("span",{className:"navbar-text px-3 me-auto",children:"Books Catalog List"})]})}),Object(R.jsx)(ie,{})]}),Object(R.jsx)(p.a,{exact:!0,path:"/cli/pageview",children:Object(R.jsx)(ee,{})})]})})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};o.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(j,{children:Object(R.jsx)(le,{})})}),document.getElementById("root")),se()},80:function(e,t,n){},82:function(e,t,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.36c54718.chunk.js.map